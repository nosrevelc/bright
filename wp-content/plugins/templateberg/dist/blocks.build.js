!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,n){var r,a;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var o=n.apply(null,r);o&&e.push(o)}else if("object"===a)for(var l in r)i.call(r,l)&&r[l]&&e.push(l)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(a=function(){return n}.apply(t,r))&&(e.exports=a))}()},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!Object(a.a)(n))throw TypeError("Stringified UUID is invalid");return n}for(var a=n(2),i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));t.a=r},function(e,t,n){"use strict";function r(e){return"string"===typeof e&&a.a.test(e)}var a=n(23);t.a=r},function(e,t,n){e.exports=n(20)},function(e,t,n){"use strict";var r=(n(22),n(24),n(26));n.d(t,"a",function(){return r.a});n(27),n(29),n(30),n(2),n(1),n(7)},function(e,t,n){"use strict";function r(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)}t.a=r;var a,i=new Uint8Array(16)},function(e,t,n){"use strict";function r(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var a=n(1),i=n(7);t.a=function(e,t,n){function o(e,o,l,s){if("string"===typeof e&&(e=r(e)),"string"===typeof o&&(o=Object(i.a)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,l){s=s||0;for(var u=0;u<16;++u)l[s+u]=c[u];return l}return Object(a.a)(c)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}},function(e,t,n){"use strict";function r(e){if(!Object(a.a)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}var a=n(2);t.a=r},function(e,t,n){"use strict";function r(e){var t=[];return e.map(function(e,n){var a=e.name,i=e.attributes,o=e.innerBlocks;o.length>0&&(o=r(o)),t=t.concat([wp.blocks.createBlock(a,i,o)])}),t}function a(e){if(!e||!e.name||!e.attributes)return e;if(Array.isArray(e)){var t=[];return e.map(function(e,n){var a=e.name,i=e.attributes,o=e.innerBlocks;o&&o.length>0&&(o=r(o)),t=t.concat([wp.blocks.createBlock(a,i,o)])}),t}var n=e.name,a=e.attributes,i=e.innerBlocks;return i&&i.length>0&&(i=r(i)),wp.blocks.createBlock(n,a,i)}function i(e,t,n){void 0===e[t]&&(e[t]=[]),void 0===e[t][n]?e[t][n]=1:e[t][n]++,void 0===e[t].all?e[t].all=1:e[t].all++}function o(e,t,n){void 0===e[t]&&(e[t]=[]),void 0===e[t][n]?e[t][n]=1:e[t][n]++,void 0===e[t]["all-pro"]?e[t]["all-pro"]=1:e[t]["all-pro"]++}function l(e,t,n){void 0===e[t]&&(e[t]=[]),void 0===e[t][n]?e[t][n]=1:e[t][n]++,void 0===e[t]["all-free"]?e[t]["all-free"]=1:e[t]["all-free"]++}function s(e){var t={"gutentor/icon-box":__("Icon Widget","gutentor"),"gutentor/image-box":__("Image Widget","gutentor"),"gutentor/content-box":__("Content Widget","gutentor"),"gutentor/team":__("Team Widget","gutentor"),"gutentor/accordion":__("Accordion Widget","gutentor"),"gutentor/opening-hours":__("Opening Hours Widget","gutentor"),"gutentor/timeline":__("Timeline Widget","gutentor"),"gutentor/counter-box":__("Counter Widget","gutentor"),"gutentor/tabs":__("Tabs Widget","gutentor"),"gutentor/about-block":__("About Widget","gutentor"),"gutentor/featured-block":__("Featured Widget","gutentor"),"gutentor/testimonial":__("Testimonial Widget","gutentor"),"gutentor/restaurant-menu":__("Restaurant Menu Widget","gutentor"),"gutentor/pricing":__("Pricing Widget","gutentor"),"gutentor/gallery":__("Gallery Widget","gutentor"),"gutentor/social":__("Social Links Widget","gutentor"),"gutentor/divider":__("Divider","gutentor"),"gutentor/video-popup":__("Video Popup Widget","gutentor"),"gutentor/progress-bar":__("Progress Bar Widget","gutentor"),"gutentor/image-slider":__("Image Slider Widget","gutentor"),"gutentor/author-profile":__("Author Widget","gutentor"),"gutentor/call-to-action":__("Call To Action Widget","gutentor"),"gutentor/count-down":__("Countdown Widget","gutentor"),"gutentor/google-map":__("Google Map Widget","gutentor"),"gutentor/blog-post":__("Post Widget","gutentor"),"gutentor/list":__("Advanced List Widget","gutentor"),"gutentor/show-more":__("Show More Widget","gutentor"),"gutentor/notification":__("Notification Widget","gutentor"),"gutentor/advanced-import":__("Template Library","gutentor"),"gutentor/advanced-columns":__("Advanced Columns (Old Version)","gutentor"),"gutentor/single-column":__("Single Column (Old Version)","gutentor"),"gutentor/button":__("Button (Old version)","gutentor"),"gutentor/e0":__("Simple Text","gutentor"),"gutentor/e1":__("Advanced Text","gutentor"),"gutentor/e2":__("Button","gutentor"),"gutentor/e3":__("Counter","gutentor"),"gutentor/e4":__("Google Map","gutentor"),"gutentor/e5":__("Icon","gutentor"),"gutentor/e6":__("Image","gutentor"),"gutentor/e7":__("Advanced List","gutentor"),"gutentor/e8":__("Pricing","gutentor"),"gutentor/e9":__("Progress Bar","gutentor"),"gutentor/e10":__("Rating","gutentor"),"gutentor/e11":__("Video Popup","gutentor"),"gutentor/e12":__("Pagination","gutentor"),"gutentor/e13":__("Navigation","gutentor"),"gutentor/e14":__("Term Filter","gutentor"),"gutentor/e15":__("Single Column","gutentor"),"gutentor/e16":__("Post Module Header","gutentor"),"gutentor/e17":__("Post Module Footer","gutentor"),"gutentor/e20":__("Filter Module Header","gutentor"),"gutentor/e18":__("Filter Item","gutentor"),"gutentor/e19":__("Filter Items","gutentor"),"gutentor/e21":__("Search","gutentor"),"gutentor/m0":__("Carousel","gutentor"),"gutentor/m0-col":__("Carousel Single Column","gutentor"),"gutentor/m1":__("Button Group","gutentor"),"gutentor/m2":__("Dynamic Columns","gutentor"),"gutentor/m2-col":__("Dynamic Single Column","gutentor"),"gutentor/m3":__("Container/Cover","gutentor"),"gutentor/m4":__("Advanced Columns","gutentor"),"gutentor/m4-col":__("Single Column","gutentor"),"gutentor/m5":__("Slider","gutentor"),"gutentor/m5-col":__("Single Slide","gutentor"),"gutentor/m6-item":__("Single Accordion Item","gutentor"),"gutentor/m6":__("Accordion","gutentor"),"gutentor/m7":__("Tabs","gutentor"),"gutentor/m7-tab":__("Single Tab Item","gutentor"),"gutentor/m8":__("Icon Group","gutentor"),"gutentor/m9":__("Form Wrapper","gutentor"),"gutentor/m10":__("Gallery","gutentor"),"gutentor/m10-col":__("Single Column","gutentor"),"gutentor/m11":__("Filter","gutentor"),"gutentor/m12":__("Quote","gutentor"),"gutentor/m13":__("Table of Contents","gutentor"),"gutentor/p1":__("Post (Type)","gutentor"),"gutentor/p2":__("Post (Type) Feature","gutentor"),"gutentor/p3":__("Post (Type) Carousel","gutentor"),"gutentor/p4":__("Advanced Post (Type)","gutentor"),"gutentor/p5":__("Post (Type) News Ticker","gutentor"),"gutentor/p6":__("Duplex Post (Type)","gutentor"),"gutentor/t1":__("Term (Category)","gutentor"),"gutentor/t2":__("Term (Category) Feature","gutentor"),"gutentor/t3":__("Term Category Carousel","gutentor"),"gutentor/m14":__("Advance Show More","gutentor"),"gutentor/m15":__("PopOver","gutentor"),"gutentor/m16":__("Wrapper","gutentor")};return t[e]?t[e]:e}t.a=a,t.c=i,t.e=o,t.d=l,t.b=s;var __=wp.i18n.__},function(e,t,n){"use strict";function r(e){var t=i(e);return wp.element.createElement(a,{blocks:t,__experimentalOnReady:function(e){e.scale,e.previewContainerRef,e.position}})}t.a=r;var a=wp.blockEditor.BlockPreview,i=wp.blocks.parse},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__=wp.i18n.__,c=wp.element,u=c.Component,p=c.Fragment,m=wp.components,d=m.Button,b=m.Dashicon,g=m.Tooltip,f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.props.data;return n.state={loading:!1},n.tbClose=n.tbClose.bind(n),n}return i(t,e),s(t,[{key:"tbClose",value:function(){var e=this.props.data;e.notice=!1,this.props.close(e)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.code&&!t.import&&99!==t.code,r=t.msg?t.msg:null,a=t.upgrade?t.upgrade:null;t.code&&t.code;return n?wp.element.createElement(p,null,wp.element.createElement("div",{className:l()("tb-notice",{"tb-notice-loading":this.state.loading})},wp.element.createElement("div",{className:"tb-notice-links"},wp.element.createElement("div",{className:"tb-notice-events"},wp.element.createElement("div",{className:"tb-notice-info"},wp.element.createElement("p",null,r)),999!==t.code&&wp.element.createElement(p,null,wp.element.createElement("div",{className:"tb-notice-events-btn"},wp.element.createElement("a",{className:"tb-event-sure",href:a,target:"_blank"},wp.element.createElement("span",{className:"dashicons dashicons-thumbs-up"}),__("Sure","templateberg")),wp.element.createElement(d,{className:"tb-event-may-be-later",onClick:function(){return e.tbClose()}},wp.element.createElement("span",{className:"dashicons dashicons-calendar"}),__("Maybe Later","templateberg"))),wp.element.createElement("div",{className:"tb-notice-events-btn"},wp.element.createElement("a",{className:"tb-event-purchase",href:"https://templateberg.com/dashboard/?action=purchases",target:"_blank"},wp.element.createElement("span",{className:"dashicons dashicons-admin-users"}),__("Purchases","templateberg")),wp.element.createElement("a",{className:"tb-event-support",href:"https://templateberg.com/dashboard/?action=support",target:"_blank"},wp.element.createElement("span",{className:"dashicons dashicons-editor-help"}),__("Contact Support","templateberg")))),999===t.code&&wp.element.createElement(p,null,wp.element.createElement("div",{className:"tb-notice-events-btn"},wp.element.createElement("a",{className:"tb-event-sure",href:templateberg.plugin_url,target:"_blank"},wp.element.createElement("span",{className:"dashicons dashicons-admin-plugins"}),__("Install Plugins","templateberg")),wp.element.createElement(d,{className:"tb-event-may-be-later",onClick:function(){return e.props.import(t)}},wp.element.createElement("span",{className:"dashicons dashicons-hidden"}),__("Ignore Plugins","templateberg"))))),wp.element.createElement(g,{text:__("Close","templateberg")},wp.element.createElement(d,{className:"tb-notice-close","aria-label":__("Close settings","templateberg"),onClick:function(){return e.tbClose()}},wp.element.createElement(b,{icon:"no-alt"})))))):""}}]),t}(u);t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return b(d(e))}function l(e,t,n){if(e){t?t+=".json":t="block.json","object"===("undefined"===typeof e?"undefined":u(e))&&(e=1===n.count?JSON.stringify(e.shift(),void 0,4):JSON.stringify(e,void 0,4));var r=new Blob([e],{type:"text/json"}),a=document.createEvent("MouseEvents"),i=document.createElement("a");i.download=t,i.href=window.URL.createObjectURL(r),i.dataset.downloadurl=["text/json",i.download,i.href].join(":"),a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}}function s(){l(wp.data.select("core/block-editor").getBlocks(),"template",!1)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__=wp.i18n.__,p=wp.plugins.registerPlugin,m=wp.blocks,d=m.serialize,b=m.parse,g=wp.compose.compose,f=wp.data.withSelect,h=wp.element.Component,v=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.exportBlocks=e.exportBlocks.bind(e),e}return i(t,e),c(t,[{key:"exportBlocks",value:function(){l(o(1===this.props.count?this.props.block:this.props.blocks),1===this.props.count?this.props.block.name:"",this.props)}},{key:"render",value:function(){if(!wp.editPost)return"";var e=wp.editPost.PluginBlockSettingsMenuItem;return wp.element.createElement(e,{icon:"migrate",label:__("Export Block","templateberg"),onClick:this.exportBlocks})}}]),t}(h);p("templateberg-block-export",{render:g([f(function(e){var t=e("core/block-editor"),n=t.getSelectedBlockCount,r=t.getSelectedBlock,a=t.getMultiSelectedBlocks;return{count:n(),block:r(),blocks:a()}})])(v)}),t.a=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(13),n(18),n(11),n(35)},function(e,t,n){"use strict";var r=n(14),a=(n.n(r),n(15)),i=(n.n(a),n(16)),o=(n.n(i),n(17));n.n(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(){var e=document.querySelector(".edit-post-header__toolbar");if(e||(e=document.querySelector(".edit-site-header__toolbar")),e){var t=document.createElement("div");t.classList.add("tb-import-button");var n='<button id="tb-advanced-import-button" class="components-button components-icon-button" title="'+__("Templateberg","templateberg")+'">';n+='<img src="'+templateberg.templatebergWhiteSvg+'" class="components-panel__icon" size="20" style="width: 20px; margin-right: 10px">',n+=""+__("Templateberg","templateberg"),n+="</button>",t.innerHTML=n,e.insertBefore(t,e.childNodes[0]),document.getElementById("tb-advanced-import-button").addEventListener("click",a)}}function a(){var e=wp.blocks.createBlock("templateberg/a1",{isImportOpen:!0});wp.data.dispatch("core/block-editor").insertBlocks(e)}var i=n(0),o=n.n(i),l=n(19),__=wp.i18n.__,s=wp.blocks.registerBlockType,c=wp.components,u=c.Tooltip,p=c.Button,m=c.Dashicon,d={blockID:{type:"string"},isImportOpen:{type:"boolean",default:!1}};s("templateberg/a1",{title:__("Templateberg","templateberg"),description:__("Advanced Import - Import Blocks and Templates Library","templateberg"),icon:wp.element.createElement("img",{src:templateberg.templateLibrarySvg}),category:"templateberg-modules",keywords:[__("Advanced Import Template Block Widget Section Patterns Reusable Library Tools","templateberg")],attributes:wp.hooks.applyFilters("templateberg_add_attributes",d),edit:function(e){var t=e.attributes,n=e.className,r=e.setAttributes,a=e.clientId,i=t.blockID,s=t.isImportOpen;i!==a&&r({blockID:a});var c=function(){r({isImportOpen:!1})};return wp.element.createElement("section",{id:"section-"+i,className:o()("tb-section","tb-advanced-import",n)},wp.element.createElement(u,{text:__("Open Templateberg Library","templateberg")},wp.element.createElement(p,{isPrimary:!0,isLarge:!0,className:"tb-template-library",onClick:function(){return r({isImportOpen:!0})}},wp.element.createElement(m,{icon:"category"}),__("Templateberg","templateberg")),s&&wp.element.createElement(l.a,{clientId:a,close:c})))},save:function(e){return null}});var b=!1,g=setInterval(function(){(document.querySelector(".edit-post-header__toolbar")||document.querySelector(".edit-site-navigation-toggle"))&&(r(),b=!0),b&&clearInterval(g)},500)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(3),c=n.n(s),u=n(0),p=n.n(u),m=n(4),d=n(31),b=n(32),g=(n.n(b),n(10)),f=n(8),h=n(9),v=n(33),w=n(34),y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=lodash,E=k.startCase,C=k.toLower,__=wp.i18n.__,S=wp,N=S.apiFetch,T=wp.components,P=T.Button,I=T.Placeholder,x=T.Dashicon,O=T.TextControl,j=T.Tooltip,B=T.Modal,L=T.Notice,A=T.Spinner,F=wp.blocks.parse,R=wp.compose.compose,M=wp.data,W=M.withSelect,D=M.withDispatch,U=wp.element.Fragment,K=wp.element.Component,G=void 0,V=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.changeTab=e.changeTab.bind(e),e.fixTab=e.fixTab.bind(e),e.removeError=e.removeError.bind(e),e.removeMissing=e.removeMissing.bind(e),e.selectCategory=e.selectCategory.bind(e),e.selectFreeCategory=e.selectFreeCategory.bind(e),e.selectProCategory=e.selectProCategory.bind(e),e.changeSearch=e.changeSearch.bind(e),e.changeClientId=e.changeClientId.bind(e),e.validateBlocks=e.validateBlocks.bind(e),e.importTemplate=e.importTemplate.bind(e),e.importReusableBlock=e.importReusableBlock.bind(e),e.getFreeProTab=e.getFreeProTab.bind(e),e.getCategories=e.getCategories.bind(e),e.gotoTemplateKit=e.gotoTemplateKit.bind(e),e.setInterval=e.setInterval.bind(e),e.clearInterval=e.clearInterval.bind(e),e.renderConnectAccount=e.renderConnectAccount.bind(e),e.state={hasAccount:null,justOnce:!1,tab:"template-kit",isLoaded:!1,isRefresh:!1,isError:!1,isMissing:!1,isAllCatSelected:!1,isFreeCatSelected:!1,isProCatSelected:!1,selectedTab:"all",selectedCategory:"all",search:"",bCats:[],bFreeCats:[],bProCats:[],tCats:[],tFreeCats:[],tProCats:[],tkCats:[],tkFreeCats:[],tkProCats:[],tkSelected:null,tkSelectedItem:null,pCats:[],data:[],selectedTemplate:null,missingBlocks:[],countItems:[],countFreeItems:[],countProItems:[],tkCount:[],found_posts:100,max_pages:3,paged:1,gutentorMsg:!1,purchased_templates:null,purchased_template_kits:null,tBergNotice:{notice:!1},gutentorInfo:{}},e.uploadInput=React.createRef(),e.uploadImport=e.uploadImport.bind(e),e.refreshTemplateLibrary=e.refreshTemplateLibrary.bind(e),e.noticeSetup=e.noticeSetup.bind(e),e}return l(t,e),_(t,[{key:"templateFetch",value:function(){function e(){return t.apply(this,arguments)}var t=a(c.a.mark(function e(){var t,n,r,a,i,o,l,s,u,p,m,d,b,g,h,v,w,_,k,E,C,S,T,P,I=arguments.length>0&&void 0!==arguments[0]&&arguments[0],x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="templateberg/v1/get_templates?paged="+x,I&&(t="templateberg/v1/get_templates?reset=true&paged="+x),e.next=4,N({path:t});case 4:n=e.sent,n?"object"===("undefined"===typeof n?"undefined":y(n))?(r=[],a=[],i=[],o=[],l=[],s=[],u=[],p=[],m=[],d=[],b=[],g=[],h=[],v=[],w=[],_=n.templates,k=n.found_posts,E=n.max_pages,C=n.purchased_items,_?(_.map(function(e){var t=e.type;"widget"===t||"blocks"===t?t="block":"templates"===t?t="template":"my-purchase"===t?t="my-purchase":"template-kits"===t&&(t="template-kit"),void 0===w[t]&&(w[t]=[]),w[t].push(e),e.categories&&("template-kit"===t?(e.categories.map(function(n){e.is_pro?(m.push(n),Object(f.e)(h,t,n)):(p.push(n),Object(f.d)(g,t,n)),u.push(n),Object(f.c)(b,t,n)}),e.templates&&(v[e.id]=e.templates.length)):"template"===t?e.categories.map(function(n){e.is_pro?(s.push(n),Object(f.e)(h,t,n)):(l.push(n),Object(f.d)(g,t,n)),o.push(n),Object(f.c)(b,t,n)}):"block"===t?e.categories.map(function(n){e.is_pro?(i.push(n),Object(f.e)(h,t,n)):(a.push(n),Object(f.d)(g,t,n)),r.push(n),Object(f.c)(b,t,n)}):"pattern"===t&&e.categories.map(function(e){d.push(e),Object(f.c)(b,t,e)}))}),r=r.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),a=a.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),i=i.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),o=o.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),l=l.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),s=s.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),u=u.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),p=p.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),m=m.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),d=d.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),S=this.fixTab(w),T=this.purchasedTemplates(C),P=this.purchasedTemplateKits(C),this.setState({bCats:r,bFreeCats:a,bProCats:i,tCats:o,tFreeCats:l,tProCats:s,tkCats:u,tkFreeCats:p,tkProCats:m,pCats:d,data:w,isLoaded:!0,isRefresh:!1,countItems:b,countFreeItems:g,countProItems:h,tkCount:v,hasAccount:!0,tab:S,found_posts:k,max_pages:E,purchased_templates:T,purchased_template_kits:P,gutentorInfo:!!n.gutentor&&n.gutentor})):this.setState({isLoaded:!0,isRefresh:!1,isError:!0,hasAccount:!0})):this.setState({isLoaded:!0,isRefresh:!1,isError:!0,hasAccount:!0}):this.setState({hasAccount:!1});case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"refreshTemplateLibrary",value:function(){var e=this;e.setState({bCats:[],bFreeCats:[],bProCats:[],tCats:[],tFreeCats:[],tProCats:[],tkCats:[],tkFreeCats:[],tkProCats:[],pCats:[],data:[],isLoaded:!1,isRefresh:!0}),e.templateFetch(!0)}},{key:"uploadImport",value:function(e){var t=this;this.setState({missingBlocks:[]});var n=e.current.files[0],r=new FileReader;r.onload=function(){var e=JSON.parse(r.result);t.validateBlocks(e)?t.setState({isMissing:!0}):t.props.import(e)},r.readAsText(n)}},{key:"componentDidMount",value:function(){this.templateFetch()}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"changeTab",value:function(e){this.setState({tab:e,selectedCategory:"all",search:""})}},{key:"fixTab",value:function(e){var t=this.state.tab;return e[t]?t:e["template-kit"]?"template-kit":e.block?"block":e.template?"template":t}},{key:"purchasedTemplates",value:function(e){var t=[];if(e)for(var n=0;n<e.length;n++)"template-kits"===e[n].type||"template-kit"===e[n].type?e[n].templates.map(function(e){t.push(e)}):"templates"!==e[n].type&&"template"!==e[n].type||t.push(e[n]);return t}},{key:"purchasedTemplateKits",value:function(e){var t=[];if(e)for(var n=0;n<e.length;n++)"template-kits"!==e[n].type&&"template-kit"!==e[n].type||t.push(e[n]);return t}},{key:"isFreeItem",value:function(e){var t=!1;return e.is_pro||(t=!0),t}},{key:"isPurchasedTemplateKit",value:function(e){var t=!1;if(this.state.purchased_template_kits)for(var n=0;n<this.state.purchased_template_kits.length;n++)if(this.state.purchased_template_kits[n].id===e.id){t=!0;break}return t}},{key:"removeError",value:function(){this.setState({isError:!1})}},{key:"removeMissing",value:function(){this.setState({isMissing:!1})}},{key:"selectCategoryTab",value:function(e){this.setState({selectedTab:e,selectedCategory:e,isAllCatSelected:"all"===e,isFreeCatSelected:"all-free"===e,isProCatSelected:"all-pro"===e,isLoaded:!0})}},{key:"selectCategory",value:function(e){this.setState({selectedCategory:e,isAllCatSelected:!0,isProCatSelected:!1,isLoaded:!0})}},{key:"selectFreeCategory",value:function(e){this.setState({selectedCategory:e,isFreeCatSelected:!0,isAllCatSelected:!1,isProCatSelected:!1,isLoaded:!0})}},{key:"selectProCategory",value:function(e){this.setState({selectedCategory:e,isProCatSelected:!0,isFreeCatSelected:!1,isAllCatSelected:!1,isLoaded:!0})}},{key:"changeSearch",value:function(e){this.setState({search:e,isAllCatSelected:!0})}},{key:"changeClientId",value:function(e){var t=this;return Array.isArray(e)?e.map(function(e){return t.changeClientId(e)}):"object"===("undefined"===typeof e?"undefined":y(e))&&Object.keys(e).map(function(n){"clientId"===n&&(e[n]=Object(m.a)()),"innerBlocks"===n&&e[n].map(function(e){t.changeClientId(e)})}),e}},{key:"validateBlocks",value:function(e){var t=this,n=!1,r=[];return Array.isArray(e)?e.map(function(e){return t.validateBlocks(e)}):"object"===("undefined"===typeof e?"undefined":y(e))&&Object.keys(e).some(function(a){if("name"===a){void 0===t.props.availableBlocks.find(function(t){return t.name===e.name})&&(r.push(e.name),n=!0)}"innerBlocks"===a&&e[a].map(function(e){return t.validateBlocks(e)})}),r=this.state.missingBlocks.concat(r).filter(function(e,t,n){return n.indexOf(e)===t}),this.setState({missingBlocks:r}),!(r.length<1)}},{key:"noticeSetup",value:function(e){var t=this.state.tBergNotice;e.code&&!e.import?t.notice=!0:t.notice=!1,e.item?t.item=e.item:t.item=!1,t.msg=e.msg,t.code=e.code,t.upgrade=e.upgrade,this.setState({tBergNotice:t})}},{key:"importTemplate",value:function(){function e(e){return t.apply(this,arguments)}var t=a(c.a.mark(function e(t){var n,r,a,i,o,l,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoaded:!1,missingBlocks:[]}),n="",s&&(n+="ignore_plugins=true&");for(r in t)"price_with_symbol"!==r&&t.hasOwnProperty(r)&&(n+="plugins"===r?r+"="+encodeURIComponent(JSON.stringify(t[r]))+"&":r+"="+t[r]+"&");return e.next=6,N({path:"templateberg/v1/get_template_data?"+n});case 6:a=e.sent,i="undefined"===typeof a?"undefined":y(a),this.noticeSetup(a),"object"===i?a.missing_plugins?(o="",a.missing_plugins.forEach(function(e,t){e.name&&(o+=" "+e.name,t<a.missing_plugins.length-1&&(o+=","))}),this.noticeSetup({code:999,import:!1,msg:__("Following Plugins Missing:","templateberg")+o,item:t})):(a.template_json&&(a=a.template_json),a=this.changeClientId(a),null!==a?(l={isLoaded:!0},a.gutentor&&(l.gutentorInfo=!!a.gutentor&&a.gutentor),this.setState(l),this.validateBlocks(a)?this.setState({isMissing:!0}):this.props.import(a)):this.setState({isLoaded:!0,isError:!0})):this.setState({isLoaded:!0,isError:!0});case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getFreeProTab",value:function(){return[{label:__("All","templateberg"),value:"all"},{label:__("Free","templateberg"),value:"all-free"},{label:__("Pro","templateberg"),value:"all-pro"}]}},{key:"getCategories",value:function(){var e={},t=void 0;return"template-kit"===this.state.tab?t=this.state.tkCats:"template"===this.state.tab?t=this.state.tCats:"block"===this.state.tab?t=this.state.bCats:"pattern"===this.state.tab&&(t=this.state.pCats),!!t&&(!!(e=t.map(function(e){return e={label:E(C(e)),value:e}}))&&[{label:__("All","templateberg"),value:"all"}].concat(r(e)))}},{key:"getFreeCategories",value:function(){var e={},t=void 0;return"template-kit"===this.state.tab?t=this.state.tkFreeCats:"template"===this.state.tab?t=this.state.tFreeCats:"block"===this.state.tab?t=this.state.bFreeCats:"pattern"===this.state.tab&&(t=this.state.pCats),!!t&&(!!(e=t.map(function(e){return e={label:E(C(e)),value:e}}))&&[{label:__("All","templateberg"),value:"all-free"}].concat(r(e)))}},{key:"getProCategories",value:function(){var e={},t=void 0;return"template-kit"===this.state.tab?t=this.state.tkProCats:"template"===this.state.tab?t=this.state.tProCats:"block"===this.state.tab?t=this.state.bProCats:"pattern"===this.state.tab&&(t=this.state.pCats),!!t&&(!!(e=t.map(function(e){return e={label:E(C(e)),value:e}}))&&[{label:__("All","templateberg"),value:"all-pro"}].concat(r(e)))}},{key:"isTemplateAvailable",value:function(e){var t=!1;if(e.template_url)if(e.is_pro){if(this.state.gutentorInfo&&parseInt(this.state.gutentorInfo.template_kits_left)>0)t=!0;else if(this.state.purchased_templates)for(var n=0;n<this.state.purchased_templates.length;n++)if(parseInt(this.state.purchased_templates[n].id)===parseInt(e.id)){t=!0;break}}else t=!0;else t=!1;return t}},{key:"gotoTemplateKit",value:function(e){var t=this.state.data,n=void 0;n=e.id?e.id:e,t.tkSelected=[],e.templates?t.tkSelected=e.templates:(t.template.map(function(r){r.id===n&&(e=r),r.template_kit_id&&r.template_kit_id===n&&t.tkSelected.push(r)}),t["template-kit"].map(function(t){t.id===n&&(e=t)})),this.setState({data:t,tab:"tkSelected",tkSelected:n,tkSelectedItem:e,selectedCategory:"all"})}},{key:"templateButton",value:function(e){var t=this;return"template-kit"===this.state.tab?this.isFreeItem(e)||this.isPurchasedTemplateKit(e)||this.state.gutentorInfo&&parseInt(this.state.gutentorInfo.template_kits_left)>0?wp.element.createElement(P,{isPrimary:!0,isLarge:!0,className:"g-goto-tk",onClick:function(){t.gotoTemplateKit(e)},tabindex:"0",showTooltip:!0,label:__("View Templates and Import","templateberg")},__("Details","templateberg")):wp.element.createElement("a",{className:"g-tk-buynow",href:e.permalink,target:"_blank"},__("Buy Now","templateberg")):"reusable"===this.state.tab||"pattern"===this.state.tab||this.isTemplateAvailable(e)?wp.element.createElement(P,{isPrimary:!0,isLarge:!0,className:"tb-list__item-import",onClick:function(){return"reusable"===t.state.tab||"pattern"===t.state.tab?t.importReusableBlock(e.post_content):t.importTemplate(e)},tabindex:"0"},__("Insert","templateberg")):wp.element.createElement("a",{className:"tb-list__item-buy-link",href:e.permalink?e.permalink:"https://www.templateberg.com/pricing/",target:"_blank"},__("Buy Now","templateberg"))}},{key:"importReusableBlock",value:function(e){this.props.import(F(e))}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;if(this.state.justOnce)return!1;var t=this;G=setInterval(a(c.a.mark(function n(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.templateFetch();case 1:case"end":return e.stop()}},n,e)})),2e3),this.setState({justOnce:!0})})},{key:"templatebergOnlyTabs",value:function(e){return!!["block","template","template-kit"].includes(e)}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){G&&clearInterval(G)})},{key:"renderLoading",value:function(){return wp.element.createElement("div",{className:"tb-advanced-import-content"},wp.element.createElement(j,{text:__("Close","templateberg")},wp.element.createElement(P,{className:"tb-advanced-import-modal-tabs-button","aria-label":__("Close settings","templateberg"),onClick:this.props.close},wp.element.createElement(x,{icon:"no-alt"}))),wp.element.createElement("div",{className:"tb-advanced-import-loader"},wp.element.createElement(A,null)))}},{key:"installGutentor",value:function(){if(templateberg.gutentor.active||this.state.gutentorMsg)return!1;var e=this;jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"templateberg_gutentor",security:templateberg.nonce},success:function(t){e.setState({gutentorMsg:!0})},error:function(e,t,n){console.log(n)}})}},{key:"renderConnectAccount",value:function(){return wp.element.createElement(U,null,wp.element.createElement("div",{className:"tb-connect__notice tb-text__center"},wp.element.createElement("div",{className:"tb-advanced-import-modal-actions"},wp.element.createElement(j,{text:__("Close","templateberg")},wp.element.createElement(P,{className:"tb-advanced-import-modal-tabs-button","aria-label":__("Close settings","templateberg"),onClick:this.props.close},wp.element.createElement(x,{icon:"no-alt"})))),wp.element.createElement("div",{className:"tb-connect__icon"},wp.element.createElement("img",{src:templateberg.templatebergLogo,alt:"Templateberg"})),wp.element.createElement("h3",{className:"tb-connect__title"},__("Get access to hundreds of free templates by creating free account.","templateberg")),wp.element.createElement("p",{className:"tb-connect__desc"},__("Templateberg power you to create site quickly and easily. You don't have to spend hours trying to create a template and block design. With a click your favourite template design will import on your site and you can change text, image and customize it for your needs.","templateberg"),__("Clicking the button below will install and activate the Gutentor Plugin since most of the templates are built with it.","templateberg")),wp.element.createElement("a",{id:"tb-connect-btn",href:templateberg.connectUrl,onClick:this.installGutentor(),target:"_blank",className:"tb-btn tb-btn__primary tb-btn__lg"},__("Get Started With Templateberg","templateberg"))),this.setInterval())}},{key:"renderMissingError",value:function(){return wp.element.createElement("div",{className:"tb-advanced-import-error"},wp.element.createElement(L,{status:"warning",className:"tb-advanced-import-missing",onRemove:this.removeMissing},__("You seem to be missing some blocks that are required by your selected template.","templateberg"),wp.element.createElement("details",null,wp.element.createElement("summary",null,__("View Missing Blocks","templateberg")),wp.element.createElement("ul",null,this.state.missingBlocks.map(function(e){return wp.element.createElement("li",null,Object(f.b)(e))})))))}},{key:"renderTemplateImport",value:function(){var e=this,t=this.getFreeProTab(),n=this.getCategories(),r=this.getFreeCategories(),a=this.getProCategories(),i=this;return wp.element.createElement(U,null,wp.element.createElement("div",{className:"tb-modal-main"},wp.element.createElement("div",{className:"tb-advanced-import-modal-header"},wp.element.createElement("div",{className:"tb-advanced-import-modal-tabs"},wp.element.createElement(P,{className:p()("tb-advanced-import-modal-tabs-button",{"is-selected":"my-purchase"===this.state.tab}),onClick:function(){return e.changeTab("my-purchase")}},wp.element.createElement(x,{icon:"screenoptions"}),__("My Purchase","templateberg")),wp.element.createElement(P,{className:p()("tb-advanced-import-modal-tabs-button",{"is-selected":"template-kit"===this.state.tab},{"is-selected":"tkSelected"===this.state.tab}),onClick:function(){return e.changeTab("template-kit")}},wp.element.createElement(x,{icon:"format-gallery"}),__("Template Kits","templateberg")),wp.element.createElement(P,{className:p()("tb-advanced-import-modal-tabs-button",{"is-selected":"template"===this.state.tab}),onClick:function(){return e.changeTab("template")}},wp.element.createElement(x,{icon:"editor-table"}),__("Templates","templateberg")),wp.element.createElement(P,{className:p()("tb-advanced-import-modal-tabs-button",{"is-selected":"block"===this.state.tab}),onClick:function(){return e.changeTab("block")}},wp.element.createElement(x,{icon:"screenoptions"}),__("Blocks","templateberg")),wp.element.createElement(P,{className:p()("tb-advanced-import-modal-tabs-button",{"is-selected":"file"===this.state.tab}),onClick:function(){return e.changeTab("file")}},wp.element.createElement(x,{icon:"upload"}),__("File","templateberg"))),wp.element.createElement("div",{className:"tb-advanced-import-modal-actions"},this.state.gutentorInfo&&this.state.gutentorInfo.template_kits_total&&wp.element.createElement(v.a,{gutentorInfo:this.state.gutentorInfo}),wp.element.createElement(j,{text:__("Refresh","templateberg")},wp.element.createElement(P,{className:"tb-advanced-import-modal-tabs-button tb-advanced-import-modal-refresh-button","aria-label":__("Refresh Templates","templateberg"),onClick:function(){return e.refreshTemplateLibrary()}},wp.element.createElement(x,{icon:"image-rotate"}))),wp.element.createElement(j,{text:__("Close","templateberg")},wp.element.createElement(P,{className:"tb-advanced-import-modal-tabs-button","aria-label":__("Close settings","templateberg"),onClick:this.props.close},wp.element.createElement(x,{icon:"no-alt"}))))),"file"!==this.state.tab&&wp.element.createElement(U,null,"tkSelected"!==this.state.tab&&wp.element.createElement("div",{className:"tb-advanced-import-actions tb-advanced-import-sidebar"},wp.element.createElement(O,{type:"text",value:this.state.search||"",placeholder:__("Search","templateberg"),className:"tb-advanced-import-search-control",onChange:this.changeSearch}),n&&wp.element.createElement("div",{className:"tb-import-available-categories"},wp.element.createElement("h3",null,__("Categories","templateberg")),this.templatebergOnlyTabs(i.state.tab)&&wp.element.createElement("div",{className:"templateberg-import-categories-wrap"},wp.element.createElement("ul",{className:"tb-import-categories-wrap-tab"},t.map(function(e,t){return wp.element.createElement("li",{onClick:function(){return i.selectCategoryTab(e.value)},className:p()("templateberg-import-categories-tab-item",e.value===i.state.selectedTab?"tb-current-tab":"")},e.label)}))),wp.element.createElement("ul",{className:p()("tb-import-avail-categories-all-lists","all"===i.state.selectedTab?"tb-categories-list-active":"")},n.map(function(e,t){return wp.element.createElement("li",{onClick:function(){return i.selectCategory(e.value)},className:e.value===i.state.selectedCategory?"tb-current-item":""},e.label,wp.element.createElement("span",null,i.state.countItems&&i.state.countItems[i.state.tab]&&i.state.countItems[i.state.tab][e.value]&&i.state.countItems[i.state.tab][e.value]))})),wp.element.createElement("ul",{className:p()("tb-import-avail-categories-free-lists","all-free"===i.state.selectedTab?"tb-categories-list-active":"")},r.map(function(e,t){return wp.element.createElement("li",{onClick:function(){return i.selectFreeCategory(e.value)},className:e.value===i.state.selectedCategory?"tb-current-item":""},e.label,wp.element.createElement("span",null,i.state.countFreeItems&&i.state.countFreeItems[i.state.tab]&&i.state.countFreeItems[i.state.tab][e.value]&&i.state.countFreeItems[i.state.tab][e.value]))})),wp.element.createElement("ul",{className:p()("tb-import-avail-categories-pro-lists","all-pro"===i.state.selectedTab?"tb-categories-list-active":"")},a.map(function(e,t){return wp.element.createElement("li",{onClick:function(){return i.selectProCategory(e.value)},className:e.value===i.state.selectedCategory?"tb-current-item":""},e.label,wp.element.createElement("span",null,i.state.countProItems&&i.state.countProItems[i.state.tab]&&i.state.countProItems[i.state.tab][e.value]&&i.state.countProItems[i.state.tab][e.value]))})))),this.state.isLoaded?wp.element.createElement("div",{className:"tb-advanced-import-content"},this.state.gutentorMsg&&wp.element.createElement("p",{className:"tb-info__msg"},__("You need to refresh your editor before importing templates.","templateberg")),this.state.isError&&wp.element.createElement("div",{className:"tb-advanced-import-error"},wp.element.createElement(L,{status:"error",onRemove:this.removeError},__("There seems to be an error. Please try again.","templateberg"),__("Some error occurs while fetching library. Please read this documentation ","templateberg"),wp.element.createElement("a",{href:"https://www.templateberg.com/documentation/article/template-library-issues-and-troubleshooting/",target:"_blank"},__("Templateberg Issues and Troubleshooting","templateberg")))),this.state.isMissing&&this.renderMissingError(),"tkSelected"===this.state.tab&&wp.element.createElement("div",{className:"g-tk-info"},wp.element.createElement(P,{className:"g-tk-back",onClick:function(){return e.changeTab("template-kit")}},wp.element.createElement(x,{icon:"arrow-left-alt"}),__("Back to Template Kits","templateberg")),!this.isFreeItem(this.state.tkSelectedItem)&&!this.isPurchasedTemplateKit(this.state.tkSelectedItem)&&wp.element.createElement("a",{className:"g-tk-buynow",href:this.state.tkSelectedItem.permalink,target:"_blank"},wp.element.createElement(x,{icon:"screenoptions"}),__("Buy Template Kit","templateberg")),i.state.tkCount[i.state.tkSelected]&&wp.element.createElement("span",{className:"g-tk-count"},i.state.tkCount[i.state.tkSelected]+" "+__("Templates","templateberg")," ")),wp.element.createElement("div",{className:"tb-advanced-import-data"},wp.element.createElement("div",{className:"tb-advanced-import-content-wrapper",id:"g-a-i-content-wrapper"},this.state.tab&&"my-purchase"===this.state.tab&&wp.element.createElement(d.a,{clientId:this.props.clientId,setMissing:function(t,n){e.setState({isMissing:t,missingBlocks:n})}}),this.state.data[i.state.tab]&&this.state.data[i.state.tab].map(function(t){if(("all-pro"===e.state.selectedCategory||"all-free"===e.state.selectedCategory||"all"===e.state.selectedCategory||t.categories&&t.categories.includes(e.state.selectedCategory))&&(!e.state.search||t.keywords&&t.keywords.some(function(t){return t.toLowerCase().includes(e.state.search.toLowerCase())})))return e.state.isAllCatSelected||!e.state.isProCatSelected||t.is_pro?!e.state.isAllCatSelected&&e.state.isFreeCatSelected&&t.is_pro?"":wp.element.createElement("div",{"aria-label":t.title||__("Untitled","templateberg"),"data-id":t.id||null,"data-tk-id":"tkSelected"===e.state.tab?e.state.tkSelected:null,"data-type":"tkSelected"===e.state.tab?"template-kits":t.type||null,className:p()("tb-list__item",t.categories?t.categories.join(" "):"",t.is_pro?"tb-advanced-import-pro-item":"")},t.is_pro&&wp.element.createElement("span",{className:"tb-list__item-pro"},__("Pro","templateberg")),wp.element.createElement("div",{className:p()("tb-list__item-preview",t.post_content?"g-html-preview g-img-loaded":"")},t.post_content?Object(h.a)(t.post_content):wp.element.createElement("img",{src:t.screenshot_url||templateberg.dirUrl+"assets/img/default-image.jpg",loading:"lazy",onLoad:function(e){return e.target.parentNode.classList.add("g-img-loaded")}}),t.author&&wp.element.createElement("span",{className:"tb-list__item_author"},wp.element.createElement("span",{className:"dashicons dashicons-admin-users"}),__(" By ","templateberg")+t.author)),wp.element.createElement("div",{className:"tb-list__item-footer"},wp.element.createElement("div",{className:"tb-list__item-footer_meta"},t.title&&wp.element.createElement("h4",null,t.title," "),"template-kit"===e.state.tab&&i.state.tkCount[t.id]&&wp.element.createElement("span",{className:"g-tk-count"},i.state.tkCount[t.id]+" "+__("Templates","templateberg")," "),"template"===e.state.tab&&t.template_kit_id&&wp.element.createElement(P,{isPrimary:!0,isLarge:!0,className:"g-goto-tk",onClick:function(){e.gotoTemplateKit(t.template_kit_id)},tabindex:"0"},__("View Related Templates","templateberg")),"template-kit"===e.state.tab&&wp.element.createElement(P,{isPrimary:!0,isLarge:!0,className:"g-goto-tk",onClick:function(){e.gotoTemplateKit(t)},tabindex:"0"},__("View Templates","templateberg"))),wp.element.createElement("div",{className:"tb-list__item-footer-actions"},t.demo_url&&wp.element.createElement("a",{className:"tb-item__preview_link",href:t.demo_url.replace(/&#038;/g,"&"),target:"_blank",onClick:function(){"tkSelected"===e.state.tab?templateberg.itemCurrent=e.state.tkSelectedItem:templateberg.itemCurrent=t}},"reusable"!==e.state.tab?__("Preview","templateberg"):__("Edit","templateberg")),i.templateButton(t)))):""})),this.templatebergOnlyTabs(i.state.tab)&&this.state.max_pages>1&&wp.element.createElement(w.a,{paged:this.state.paged,max_num_pages:this.state.max_pages,setPage:function(t){e.state.paged!==t&&(e.setState({paged:t}),e.templateFetch(!1,t))}}))):wp.element.createElement("div",{className:"tb-advanced-import-content"},wp.element.createElement(j,{text:__("Close","templateberg")},wp.element.createElement(P,{className:"tb-advanced-import-modal-tabs-button","aria-label":__("Close settings","templateberg"),onClick:this.props.close},wp.element.createElement(x,{icon:"no-alt"}))),wp.element.createElement("div",{className:"tb-advanced-import-loader"},wp.element.createElement(A,null),this.state.isRefresh?__("Refreshing","templateberg"):__("Importing","templateberg")))),"file"===this.state.tab&&wp.element.createElement(U,null,this.state.isMissing&&this.renderMissingError(),wp.element.createElement(I,{label:__("Import Blocks from JSON","templateberg"),icon:"upload"},wp.element.createElement("span",null,wp.element.createElement("input",{type:"file",accept:"text/json",ref:this.uploadInput,className:"tb-advanced-import-inputfile",name:"file",id:"file"}),wp.element.createElement("label",{htmlFor:"file"},__("Choose File","templateberg"))),wp.element.createElement(P,{isPrimary:!0,onClick:function(){return e.uploadImport(e.uploadInput)}},__("Upload","templateberg")))),this.clearInterval()))}},{key:"render",value:function(){var e=this;return wp.element.createElement(B,{className:p()("tb-advanced-import-modal",{"tb-advanced-import-missing-modal":this.state.isMissing},{"tb-file-tab":"file"===this.state.tab},{"g-tk-tab":"tkSelected"===this.state.tab},{"tb-purchase-tab":"my-purchase"===this.state.tab},{"tb-notice-modal":!this.state.hasAccount&&null!==this.state.hasAccount}),onRequestClose:this.props.close,isDismissable:!1,shouldCloseOnClickOutside:!1},this.state.tBergNotice.notice&&wp.element.createElement(g.a,{data:this.state.tBergNotice,close:function(t){var n={tBergNotice:t};t.item&&(n.isLoaded=!0),e.setState(n)},import:function(t){e.importTemplate(t.item,!0)}}),null===this.state.hasAccount&&this.renderLoading(),this.state.hasAccount&&this.renderTemplateImport(),!this.state.hasAccount&&null!==this.state.hasAccount&&this.renderConnectAccount())}}]),t}(K);t.a=R(W(function(e,t){var n=t.clientId,r=e("core/block-editor"),a=r.getBlock,i=e("core/blocks"),o=i.getBlockTypes;return{block:a(n),availableBlocks:o()}}),D(function(e,t){var n=t.block;return{import:function(t){return e("core/block-editor").replaceBlocks(n.clientId,Object(f.a)(t))}}}))(V)},function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(21),a)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),l=new d(r||[]);return o._invoke=c(e,n,l),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function o(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,a,i,o){var l=r(e[n],e,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"===typeof c&&v.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,o)},function(e){t("throw",e,i,o)}):Promise.resolve(c).then(function(e){s.value=e,i(s)},o)}o(l.arg)}function n(e,n){function r(){return new Promise(function(r,a){t(e,n,r,a)})}return a=a?a.then(r,r):r()}var a;this._invoke=n}function c(e,t,n){var a=S;return function(i,o){if(a===T)throw new Error("Generator is already running");if(a===P){if("throw"===i)throw o;return g()}for(n.method=i,n.arg=o;;){var l=n.delegate;if(l){var s=u(l,n);if(s){if(s===I)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===S)throw a=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=T;var c=r(e,t,n);if("normal"===c.type){if(a=n.done?P:N,c.arg===I)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=P,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===f){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=f,u(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var a=r(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,I;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=f),t.delegate=null,I):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function m(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function b(e){if(e){var t=e[y];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=f,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:f,done:!0}}var f,h=Object.prototype,v=h.hasOwnProperty,w="function"===typeof Symbol?Symbol:{},y=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",k=w.toStringTag||"@@toStringTag",E="object"===typeof e,C=t.regeneratorRuntime;if(C)return void(E&&(e.exports=C));C=t.regeneratorRuntime=E?e.exports:{},C.wrap=n;var S="suspendedStart",N="suspendedYield",T="executing",P="completed",I={},x={};x[y]=function(){return this};var O=Object.getPrototypeOf,j=O&&O(O(b([])));j&&j!==h&&v.call(j,y)&&(x=j);var B=o.prototype=a.prototype=Object.create(x);i.prototype=B.constructor=o,o.constructor=i,o[k]=i.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,k in e||(e[k]="GeneratorFunction")),e.prototype=Object.create(B),e},C.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[_]=function(){return this},C.AsyncIterator=s,C.async=function(e,t,r,a){var i=new s(n(e,t,r,a));return C.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},l(B),B[k]="Generator",B[y]=function(){return this},B.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=b,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(m),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=f)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=f),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=v.call(a,"catchLoc"),l=v.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,I):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),m(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;m(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:b(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=f),I}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n(5),n(1)},function(e,t,n){"use strict";t.a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},function(e,t,n){"use strict";var r=n(6),a=n(25);Object(r.a)("v3",48,a.a)},function(e,t,n){"use strict";function r(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return a(o(l(e),8*e.length))}function a(e){for(var t=[],n=32*e.length,r="0123456789abcdef",a=0;a<n;a+=8){var i=e[a>>5]>>>a%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(o)}return t}function i(e){return 14+(e+64>>>9<<4)+1}function o(e,t){e[t>>5]|=128<<t%32,e[i(t)-1]=t;for(var n=1732584193,r=-271733879,a=-1732584194,o=271733878,l=0;l<e.length;l+=16){var c=n,u=r,g=a,f=o;n=p(n,r,a,o,e[l],7,-680876936),o=p(o,n,r,a,e[l+1],12,-389564586),a=p(a,o,n,r,e[l+2],17,606105819),r=p(r,a,o,n,e[l+3],22,-1044525330),n=p(n,r,a,o,e[l+4],7,-176418897),o=p(o,n,r,a,e[l+5],12,1200080426),a=p(a,o,n,r,e[l+6],17,-1473231341),r=p(r,a,o,n,e[l+7],22,-45705983),n=p(n,r,a,o,e[l+8],7,1770035416),o=p(o,n,r,a,e[l+9],12,-1958414417),a=p(a,o,n,r,e[l+10],17,-42063),r=p(r,a,o,n,e[l+11],22,-1990404162),n=p(n,r,a,o,e[l+12],7,1804603682),o=p(o,n,r,a,e[l+13],12,-40341101),a=p(a,o,n,r,e[l+14],17,-1502002290),r=p(r,a,o,n,e[l+15],22,1236535329),n=m(n,r,a,o,e[l+1],5,-165796510),o=m(o,n,r,a,e[l+6],9,-1069501632),a=m(a,o,n,r,e[l+11],14,643717713),r=m(r,a,o,n,e[l],20,-373897302),n=m(n,r,a,o,e[l+5],5,-701558691),o=m(o,n,r,a,e[l+10],9,38016083),a=m(a,o,n,r,e[l+15],14,-660478335),r=m(r,a,o,n,e[l+4],20,-405537848),n=m(n,r,a,o,e[l+9],5,568446438),o=m(o,n,r,a,e[l+14],9,-1019803690),a=m(a,o,n,r,e[l+3],14,-187363961),r=m(r,a,o,n,e[l+8],20,1163531501),n=m(n,r,a,o,e[l+13],5,-1444681467),o=m(o,n,r,a,e[l+2],9,-51403784),a=m(a,o,n,r,e[l+7],14,1735328473),r=m(r,a,o,n,e[l+12],20,-1926607734),n=d(n,r,a,o,e[l+5],4,-378558),o=d(o,n,r,a,e[l+8],11,-2022574463),a=d(a,o,n,r,e[l+11],16,1839030562),r=d(r,a,o,n,e[l+14],23,-35309556),n=d(n,r,a,o,e[l+1],4,-1530992060),o=d(o,n,r,a,e[l+4],11,1272893353),a=d(a,o,n,r,e[l+7],16,-155497632),r=d(r,a,o,n,e[l+10],23,-1094730640),n=d(n,r,a,o,e[l+13],4,681279174),o=d(o,n,r,a,e[l],11,-358537222),a=d(a,o,n,r,e[l+3],16,-722521979),r=d(r,a,o,n,e[l+6],23,76029189),n=d(n,r,a,o,e[l+9],4,-640364487),o=d(o,n,r,a,e[l+12],11,-421815835),a=d(a,o,n,r,e[l+15],16,530742520),r=d(r,a,o,n,e[l+2],23,-995338651),n=b(n,r,a,o,e[l],6,-198630844),o=b(o,n,r,a,e[l+7],10,1126891415),a=b(a,o,n,r,e[l+14],15,-1416354905),r=b(r,a,o,n,e[l+5],21,-57434055),n=b(n,r,a,o,e[l+12],6,1700485571),o=b(o,n,r,a,e[l+3],10,-1894986606),a=b(a,o,n,r,e[l+10],15,-1051523),r=b(r,a,o,n,e[l+1],21,-2054922799),n=b(n,r,a,o,e[l+8],6,1873313359),o=b(o,n,r,a,e[l+15],10,-30611744),a=b(a,o,n,r,e[l+6],15,-1560198380),r=b(r,a,o,n,e[l+13],21,1309151649),n=b(n,r,a,o,e[l+4],6,-145523070),o=b(o,n,r,a,e[l+11],10,-1120210379),a=b(a,o,n,r,e[l+2],15,718787259),r=b(r,a,o,n,e[l+9],21,-343485551),n=s(n,c),r=s(r,u),a=s(a,g),o=s(o,f)}return[n,r,a,o]}function l(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(i(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t){return e<<t|e>>>32-t}function u(e,t,n,r,a,i){return s(c(s(s(t,e),s(r,i)),a),n)}function p(e,t,n,r,a,i,o){return u(t&n|~t&r,e,t,a,i,o)}function m(e,t,n,r,a,i,o){return u(t&r|n&~r,e,t,a,i,o)}function d(e,t,n,r,a,i,o){return u(t^n^r,e,t,a,i,o)}function b(e,t,n,r,a,i,o){return u(n^(t|~r),e,t,a,i,o)}t.a=r},function(e,t,n){"use strict";function r(e,t,n){e=e||{};var r=e.random||(e.rng||a.a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Object(i.a)(r)}var a=n(5),i=n(1);t.a=r},function(e,t,n){"use strict";var r=n(6),a=n(28);Object(r.a)("v5",80,a.a)},function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function a(e,t){return e<<t|e>>>32-t}function i(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var o=0;o<i.length;++o)e.push(i.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var l=e.length/4+2,s=Math.ceil(l/16),c=new Array(s),u=0;u<s;++u){for(var p=new Uint32Array(16),m=0;m<16;++m)p[m]=e[64*u+4*m]<<24|e[64*u+4*m+1]<<16|e[64*u+4*m+2]<<8|e[64*u+4*m+3];c[u]=p}c[s-1][14]=8*(e.length-1)/Math.pow(2,32),c[s-1][14]=Math.floor(c[s-1][14]),c[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var b=new Uint32Array(80),g=0;g<16;++g)b[g]=c[d][g];for(var f=16;f<80;++f)b[f]=a(b[f-3]^b[f-8]^b[f-14]^b[f-16],1);for(var h=n[0],v=n[1],w=n[2],y=n[3],_=n[4],k=0;k<80;++k){var E=Math.floor(k/20),C=a(h,5)+r(E,v,w,y)+_+t[E]+b[k]>>>0;_=y,y=w,w=a(v,30)>>>0,v=h,h=C}n[0]=n[0]+h>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+_>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}t.a=i},function(e,t,n){"use strict"},function(e,t,n){"use strict";n(2)},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(3),s=n.n(l),c=n(0),u=n.n(c),p=n(4),m=n(8),d=n(9),b=n(10),g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__=wp.i18n.__,h=wp,v=h.apiFetch,w=wp.components,y=w.Button,_=w.Dashicon,k=w.Tooltip,E=w.Notice,C=w.Spinner,S=wp.compose.compose,N=wp.data,T=N.withSelect,P=N.withDispatch,I=wp.element.Fragment,x=wp.element.Component,O=void 0,j=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return n.changeTab=n.changeTab.bind(n),n.removeError=n.removeError.bind(n),n.changeClientId=n.changeClientId.bind(n),n.validateBlocks=n.validateBlocks.bind(n),n.importTemplate=n.importTemplate.bind(n),n.gotoTemplateKit=n.gotoTemplateKit.bind(n),n.setInterval=n.setInterval.bind(n),n.clearInterval=n.clearInterval.bind(n),n.state={hasPurchased:null,justOnce:!1,tab:"template-kit",isLoaded:!1,isRefresh:!1,isError:!1,isApiResultError:!1,bCats:[],tCats:[],tkCats:[],tkSelected:null,tkSelectedItem:null,pCats:[],data:[],selectedTemplate:null,missingBlocks:[],countItems:[],tkCount:[],tBergNotice:{notice:!1}},n.refreshTemplateLibrary=n.refreshTemplateLibrary.bind(n),n.noticeSetup=n.noticeSetup.bind(n),n}return o(t,e),f(t,[{key:"templateFetch",value:function(){function e(){return t.apply(this,arguments)}var t=r(s.a.mark(function e(){var t,n,r,a,i,o,l,c,u,p,m=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="templateberg/v1/purchase_templates",m&&(t="templateberg/v1/purchase_templates?reset=true"),e.next=4,v({path:t});case 4:n=e.sent,n?Array.isArray(n)&&n.length?(r=function(e,t){void 0===c[e]&&(c[e]=[]),void 0===c[e][t]?c[e][t]=1:c[e][t]++,void 0===c[e].all?c[e].all=1:c[e].all++},a=[],i=[],o=[],l=[],c=[],u=[],p=[],n.map(function(e){var t=e.type;"widget"===t||"blocks"===t?t="block":"templates"===t?t="template":"template-kits"===t&&(t="template-kit"),void 0===p[t]&&(p[t]=[]),p[t].push(e),e.categories&&("block"===t?e.categories.map(function(e){a.push(e),r(t,e)}):"template"===t?e.categories.map(function(e){i.push(e),r(t,e)}):"template-kit"===t&&(e.categories.map(function(e){o.push(e),r(t,e)}),e.templates&&(u[e.id]=e.templates.length)))}),a=a.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),i=i.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),o=o.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),l=l.filter(function(e,t,n){return n.indexOf(e)===t}).sort(),this.setState({bCats:a,tCats:i,tkCats:o,pCats:l,data:p,isLoaded:!0,isRefresh:!1,countItems:c,tkCount:u,hasPurchased:!0,isApiResultError:!1,isError:!1})):this.setState({isLoaded:!0,isRefresh:!1,isError:!0,isApiResultError:!0,hasPurchased:!1}):this.setState({isLoaded:!0,isRefresh:!1,isError:!1,isApiResultError:!1,hasPurchased:!1});case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"refreshTemplateLibrary",value:function(){function e(){return t.apply(this,arguments)}var t=r(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,t.setState({bCats:[],tCats:[],tkCats:[],pCats:[],data:[],isRefresh:!0,isLoaded:!1}),e.next=4,t.templateFetch(!0);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentDidMount",value:function(){this.templateFetch()}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"changeTab",value:function(e){this.setState({tab:e})}},{key:"removeError",value:function(){this.setState({isError:!1})}},{key:"changeClientId",value:function(e){var t=this;return Array.isArray(e)?e.map(function(e){return t.changeClientId(e)}):"object"===("undefined"===typeof e?"undefined":g(e))&&Object.keys(e).map(function(n){"clientId"===n&&(e[n]=Object(p.a)()),"innerBlocks"===n&&e[n].map(function(e){t.changeClientId(e)})}),e}},{key:"validateBlocks",value:function(e){var t=this,n=!1,r=[];return Array.isArray(e)?e.map(function(e){return t.validateBlocks(e)}):"object"===("undefined"===typeof e?"undefined":g(e))&&Object.keys(e).some(function(a){if("name"===a){void 0===t.props.availableBlocks.find(function(t){return t.name===e.name})&&(r.push(e.name),n=!0)}"innerBlocks"===a&&e[a].map(function(e){return t.validateBlocks(e)})}),r=this.state.missingBlocks.concat(r).filter(function(e,t,n){return n.indexOf(e)===t}),this.setState({missingBlocks:r}),!(r.length<1)}},{key:"noticeSetup",value:function(e){var t=this.state.tBergNotice;e.code&&!e.import?t.notice=!0:t.notice=!1,e.item?t.item=e.item:t.item=!1,t.msg=e.msg,t.code=e.code,t.upgrade=e.upgrade,this.setState({tBergNotice:t})}},{key:"importTemplate",value:function(){function e(e){return t.apply(this,arguments)}var t=r(s.a.mark(function e(t){var n,r,a,i,o,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoaded:!1,missingBlocks:[]}),n="",l&&(n+="ignore_plugins=true&");for(r in t)"price_with_symbol"!==r&&t.hasOwnProperty(r)&&(n+="plugins"===r?r+"="+encodeURIComponent(JSON.stringify(t[r]))+"&":r+"="+t[r]+"&");return e.next=6,v({path:"templateberg/v1/get_template_data?"+n});case 6:a=e.sent,i="undefined"===typeof a?"undefined":g(a),this.noticeSetup(a),"object"===i?a.missing_plugins?(o="",a.missing_plugins.forEach(function(e,t){e.name&&(o+=" "+e.name,t<a.missing_plugins.length-1&&(o+=","))}),this.noticeSetup({code:999,import:!1,msg:__("Following Plugins Missing:","templateberg")+o,item:t})):(a.code&&a.template_json&&(a=a.template_json),a=this.changeClientId(a),null!==a?(this.setState({isLoaded:!0}),this.validateBlocks(a)?this.props.setMissing(!0,this.state.missingBlocks):this.props.import(a)):this.setState({isLoaded:!0,isError:!0})):this.setState({isLoaded:!0,isError:!0});case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"isTemplateAvailable",value:function(e){var t=!1;return e.template_url?e.is_pro||(t=!0):t=!1,t}},{key:"gotoTemplateKit",value:function(e){var t=this.state.data,n=void 0;n=e.id?e.id:e,t.tkSelected=[],e.templates?t.tkSelected=e.templates:t["template-kit"].map(function(r){r.id===n&&(e=r,t.tkSelected=e.templates)}),this.setState({data:t,tab:"tkSelected",tkSelected:n,tkSelectedItem:e,selectedCategory:"all"})}},{key:"templateButton",value:function(e){var t=this;return"template-kit"===this.state.tab?wp.element.createElement(y,{isPrimary:!0,isLarge:!0,className:"g-goto-tk",onClick:function(){t.gotoTemplateKit(e)},tabindex:"0"},__("View Templates","templateberg")):wp.element.createElement(y,{isPrimary:!0,isLarge:!0,className:"tb-list__item-import",onClick:function(){return t.importTemplate(e)},tabindex:"0"},__("Insert","templateberg"))}},{key:"purchaseTemplateButton",value:function(){if(this.state.isApiResultError)return wp.element.createElement("div",{className:"tb-my-purchase-template"},wp.element.createElement("span",null,__("You did not purchase any template from templateburg. Please go through the given link to purchase templates from templateburg.","templateberg"),wp.element.createElement("a",{className:"tb-my-purchase-template-buy-link",href:"https://templateberg.com/gutenberg-templates/",target:"_blank"},__("Purchase Templates","templateberg"))))}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this;if(this.state.justOnce)return!1;var t=this;O=setInterval(r(s.a.mark(function n(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.templateFetch();case 1:case"end":return e.stop()}},n,e)})),2e3),this.setState({justOnce:!0})})},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){O&&clearInterval(O)})},{key:"renderLoading",value:function(){return wp.element.createElement("div",{className:"tb-ai-pro-content"},wp.element.createElement("div",{className:"tb-advanced-import-loader"},wp.element.createElement(C,null)))}},{key:"renderTemplateImport",value:function(){var e=this,t=this;return wp.element.createElement(I,null,wp.element.createElement("div",{className:"tb-modal-purchase-main"},!this.state.isApiResultError&&wp.element.createElement("div",{className:"tb-my-purchase-adv-import-modal-header"},wp.element.createElement("div",{className:"tb-advanced-import-modal-tabs"},this.state.data["template-kit"]&&wp.element.createElement(y,{className:u()("tb-advanced-import-modal-tabs-button",{"is-selected":"template-kit"===this.state.tab},{"is-selected":"tkSelected"===this.state.tab}),onClick:function(){return e.changeTab("template-kit")}},wp.element.createElement(_,{icon:"format-gallery"}),__("Template Kits","templateberg")),this.state.data.template&&wp.element.createElement(y,{className:u()("tb-advanced-import-modal-tabs-button",{"is-selected":"template"===this.state.tab}),onClick:function(){return e.changeTab("template")}},wp.element.createElement(_,{icon:"editor-table"}),__("Templates","templateberg")),this.state.data.block&&wp.element.createElement(y,{className:u()("tb-advanced-import-modal-tabs-button",{"is-selected":"block"===this.state.tab}),onClick:function(){return e.changeTab("block")}},wp.element.createElement(_,{icon:"screenoptions"}),__("Blocks","templateberg"))),wp.element.createElement("div",{className:"tb-advanced-import-modal-actions"},wp.element.createElement(k,{text:__("Refresh","templateberg")},wp.element.createElement(y,{className:"tb-advanced-import-modal-tabs-button tb-advanced-import-modal-refresh-button","aria-label":__("Refresh Templates","templateberg"),onClick:function(){return e.refreshTemplateLibrary()}},wp.element.createElement(_,{icon:"image-rotate"}))))),"file"!==this.state.tab&&!this.state.isApiResultError&&wp.element.createElement(I,null,this.state.isLoaded?wp.element.createElement("div",{className:"tb-ai-pro-content"},this.state.isError&&wp.element.createElement("div",{className:"tb-advanced-import-error"},wp.element.createElement(E,{status:"error",onRemove:this.removeError},__("There seems to be an error. Please try again.","templateberg"),__("Some error occurs while fetching library. Please read this documentation ","templateberg"),wp.element.createElement("a",{href:"https://www.templateberg.com/documentation/article/template-library-issues-and-troubleshooting/",target:"_blank"},__("Templateberg Issues and Troubleshooting","templateberg")))),"tkSelected"===this.state.tab&&wp.element.createElement("div",{className:"g-tk-info"},wp.element.createElement(y,{className:"g-tk-back",onClick:function(){return e.changeTab("template-kit")}},wp.element.createElement(_,{icon:"arrow-left-alt"}),__("Back to Template Kits","templateberg")),t.state.tkCount[t.state.tkSelected]&&wp.element.createElement("span",{className:"g-tk-count"},t.state.tkCount[t.state.tkSelected]+" "+__("Templates","templateberg")," ")),wp.element.createElement("div",{className:"tb-ai-pro-content-wrapper",id:"tb-ai-pro-content-wrapper"},this.state.data[t.state.tab]&&this.state.data[t.state.tab].map(function(n){return wp.element.createElement("div",{"aria-label":n.title||__("Untitled","templateberg"),"data-id":n.id||null,"data-tk-id":"tkSelected"===e.state.tab?e.state.tkSelected:null,"data-type":"tkSelected"===e.state.tab?"template-kits":n.type||null,className:u()("tb-list__item",n.categories?n.categories.join(" "):"",n.is_pro?"tb-advanced-import-pro-item":"")},n.is_pro&&wp.element.createElement("span",{className:"tb-list__item-pro"},__("Pro","templateberg")),wp.element.createElement("div",{className:u()("tb-list__item-preview",n.post_content?"g-html-preview g-img-loaded":"")},n.post_content?Object(d.a)(n.post_content):wp.element.createElement("img",{src:n.screenshot_url||templateberg.dirUrl+"assets/img/default-image.jpg",loading:"lazy",onLoad:function(e){return e.target.parentNode.classList.add("g-img-loaded")}}),n.author&&wp.element.createElement("span",{className:"tb-list__item_author"},wp.element.createElement("span",{className:"dashicons dashicons-admin-users"}),__(" By ","templateberg")+n.author)),wp.element.createElement("div",{className:"tb-list__item-footer"},wp.element.createElement("div",{className:"tb-list__item-footer_meta"},n.title&&wp.element.createElement("h4",null,n.title," "),"template-kit"===e.state.tab&&t.state.tkCount[n.id]&&wp.element.createElement("span",{className:"g-tk-count"},t.state.tkCount[n.id]+" "+__("Templates","templateberg")," "),"template"===e.state.tab&&n.template_kit_id&&wp.element.createElement(y,{isPrimary:!0,isLarge:!0,className:"g-goto-tk",onClick:function(){e.gotoTemplateKit(n.template_kit_id)},tabindex:"0"},__("View Related Templates","templateberg"))),wp.element.createElement("div",{className:"tb-list__item-footer-actions"},n.demo_url&&wp.element.createElement("a",{className:"tb-item__preview_link",href:n.demo_url.replace(/&#038;/g,"&"),target:"_blank",onClick:function(){"tkSelected"===e.state.tab?templateberg.itemCurrent=e.state.tkSelectedItem:templateberg.itemCurrent=n}},__("Preview","templateberg")),t.templateButton(n))))}))):wp.element.createElement("div",{className:"tb-ai-pro-content tb-pro-loading"},wp.element.createElement("div",{className:"tb-advanced-import-loader"},wp.element.createElement(C,null),this.state.isRefresh?__("Refreshing","templateberg"):__("Importing","templateberg")))),this.state.isApiResultError&&this.purchaseTemplateButton(),this.clearInterval()))}},{key:"renderNoPayment",value:function(){var e=this;return wp.element.createElement(I,null,this.state.isLoaded?wp.element.createElement("div",{className:"tb-my-purchase__content-no-item"},wp.element.createElement("div",{className:"tb-advanced-import-modal-actions"},wp.element.createElement(k,{text:__("Refresh","templateberg")},wp.element.createElement(y,{className:"tb-advanced-import-modal-tabs-button tb-advanced-import-modal-refresh-button","aria-label":__("Refresh Templates","templateberg"),onClick:function(){return e.refreshTemplateLibrary()}},wp.element.createElement(_,{icon:"image-rotate"})))),__("No payment information found.","templateberg")):"")}},{key:"render",value:function(){var e=this;return wp.element.createElement(I,null,this.state.tBergNotice.notice&&wp.element.createElement(b.a,{data:this.state.tBergNotice,close:function(t){var n={tBergNotice:t};t.item&&(n.isLoaded=!0),e.setState(n)},import:function(t){e.importTemplate(t.item,!0)}}),null===this.state.hasPurchased&&this.renderLoading(),this.state.hasPurchased?this.renderTemplateImport():this.renderNoPayment())}}]),t}(x);t.a=S(T(function(e,t){var n=t.clientId,r=e("core/block-editor"),a=r.getBlock,i=e("core/blocks"),o=i.getBlockTypes;return{block:a(n),availableBlocks:o()}}),P(function(e,t){var n=t.block;return{import:function(t){return e("core/block-editor").replaceBlocks(n.clientId,Object(m.a)(t))}}}))(j)},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__=wp.i18n.__;!function(e){var t=function(){function t(){n(this,t),this.state={addedHtml:null}}return r(t,[{key:"setState",value:function(t){var n=this;e.each(t,function(e,t){n.state[e]=t})}},{key:"hasPrevItem",value:function(){return!!e(".tb-list__item_current").prev().length}},{key:"hasNextItem",value:function(){return!!e(".tb-list__item_current").next().length}},{key:"showHidePrevNext",value:function(){this.hasNextItem()?e(".tb-preview__next").removeClass("tb-list__page-disabled"):e(".tb-preview__next").addClass("tb-list__page-disabled"),this.hasPrevItem()?e(".tb-preview__prev").removeClass("tb-list__page-disabled"):e(".tb-preview__prev").addClass("tb-list__page-disabled")}},{key:"hideControls",value:function(){e(document).on("click",".tb-preview__collapse-btn",function(t){t.preventDefault(),e(".tb-preview__wrapper").toggleClass("tb-preview__sidebar-hide")})}},{key:"devicePreview",value:function(){e(document).on("click",".tb-preview__desktop",function(t){t.preventDefault(),e(".tb-preview__wrapper").removeClass("tb-preview-t tb-preview-m"),e(this).addClass("active").siblings().removeClass("active")}),e(document).on("click",".tb-preview__tablet",function(t){t.preventDefault(),e(".tb-preview__wrapper").removeClass("tb-preview-t tb-preview-m").addClass("tb-preview-t"),e(this).addClass("active").siblings().removeClass("active")}),e(document).on("click",".tb-preview__mobile",function(t){t.preventDefault(),e(".tb-preview__wrapper").removeClass("tb-preview-t tb-preview-m").addClass("tb-preview-m"),e(this).addClass("active").siblings().removeClass("active")})}},{key:"hidePreview",value:function(){e(document).on("click",".tb-preview__close",function(t){t.preventDefault(),e("body").removeClass("tb-preview"),e("#tb-list__item_preview").hide(),e(".tb-list__tk_templates").remove()})}},{key:"renderItem",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments[4],o="";if(i||0!==a){if(r===t.id){o="tb-list__item_current";var l=e(".tb-list__item");l.removeClass("tb-list__item_current")}}else{o="tb-list__item_current";e(".tb-list__item").removeClass("tb-list__item_current")}var s='<div aria-label="'+t.title+'" class="tb-list__item '+o+'" data-id="'+t.id+'" data-type="'+t.type+'">';return s+='<div class="tb-list__item_preview tb-list__img_loaded">',s=s+'<img src="'+t.screenshot_url+'" loading="lazy">',s+="</div>",s+='<div class="tb-list__item_footer">',s=s+'<div class="tb-list__item_meta"><h4>'+t.title+"</h4></a></div>",s+='<div class="tb-list__item_actions">',s=s+'<a class="tb-item__preview_link" href="'+t.demo_url+'" target="_blank">'+__("Preview","templateberg")+"</a>",s+="</div>",s+="</div>",s+="</div>"}},{key:"renderTKTemplates",value:function(t,n){var r=this;setTimeout(function(){var a=templateberg.itemCurrent,i=null;if(a&&a.templates&&a.templates.length){var o="";a.templates.forEach(function(e,a){var l=r.renderItem(e,r,t,a,n);o+=l,0===a&&(i=e.demo_url)}),n||r.renderDemo(i);var l=e("#tb-list__item_preview");o='<div class="tb-list__tk_templates">'+o+"</div>",l.find(".tb-preview__author").after(o)}},3)}},{key:"renderDemo",value:function(t){var n=e("#tb-list__item_preview");document.getElementById("tb-preview__frame").src=t,n.show(),this.showHidePrevNext(),setTimeout(function(){n.removeClass("tb-item__preview_loading")},3e3)}},{key:"renderPreview",value:function(){var t=e(".tb-list__item_current"),n=t.data("id"),r=t.data("tk-id"),a=t.data("type"),i=t.find("img").attr("src"),o=t.find("h4").text(),l=t.find(".tb-list__item_title_link").attr("href"),s=t.find(".tb-list__item_author").html(),c=t.find(".tb-item__preview_link").attr("href"),u=e("#tb-list__item_preview");u.addClass("tb-item__preview_loading"),u.find(".tb-list__item_buy_btn").remove(),u.find(".tb-list__item").remove(),u.find("h4").text(o),u.find("img").attr("src",i),u.find(".tb-list__item_title_link").attr("href",l),u.find(".tb-preview__author").html(s),t.find(".tb-list__item_buy_btn").clone().insertAfter(u.find(".tb-preview__author")),e("body").addClass("tb-preview"),"template-kit"!==a&&"template-kits"!==a||this.renderTKTemplates(n,r),this.renderDemo(c)}},{key:"replacePreview",value:function(){var t=e(".tb-list__item_current"),n=t.find(".tb-item__preview_link").attr("href"),r=e("#tb-list__item_preview");r.addClass("tb-item__preview_loading"),document.getElementById("tb-preview__frame").src=n,this.showHidePrevNext(),setTimeout(function(){r.removeClass("tb-item__preview_loading")},3e3)}},{key:"addPreviewHTML",value:function(){if(this.state.addedHtml)return!1;var e=document.createElement("div");e.innerHTML='<div id="tb-list__item_preview" class="tb-preview__wrapper" style="display:none"><div class="tb-preview__sidebar"><div class="tb-preview__header"><div class="tb-preview__actions"><button type="button" class="tb-preview__close"></button><button type="button" class="tb-preview__prev tb-list__page-disabled"></button><button type="button" class="tb-preview__next"></button></div></div><div class="tb-preview__sidebar-content"><h4></h4><div class="tb-preview__thumb"><img src="" /></div><div class="tb-preview__author"><span class="dashicons dashicons-admin-users"></span></div><button type="button" tabIndex="0" class="tb-list__item_btn tb-list__item_buy_btn" data-id="904" data-is_pro="pro">Purchase</button></div><div class="tb-preview__footer"><button type="button" class="tb-preview__collapse-btn"><span class="tb-preview__collapse-arrow"></span><span class="tb-preview__collapse-label">Hide Controls</span></button><div class="tb-preview__devices-wrapper"><div class="tb-preview__devices"><button type="button" class="tb-preview__desktop active" aria-pressed="true" data-device="desktop"><span class="screen-reader-text">Enter desktop preview mode</span></button><button type="button" class="tb-preview__tablet" aria-pressed="false" data-device="tablet"><span class="screen-reader-text">Enter tablet preview mode</span></button><button type="button" class="tb-preview__mobile" aria-pressed="false" data-device="mobile"><span class="screen-reader-text">Enter mobile preview mode</span></button></div></div></div></div><div class="tb-preview__main"><div class="tb-preview__main_loader"><div class="tb-preview__main_loading"><div class="tb-preview__lines"></div><div class="tb-preview__lines"></div><div class="tb-preview__lines"></div></div></div><iframe id="tb-preview__frame" src=""></iframe></div></div>',document.body.appendChild(e),this.setState({addedHtml:!0})}},{key:"run",value:function(){var t=this;e(document).on("click",".tb-item__preview_link",function(n){n.preventDefault(),t.addPreviewHTML();var r=e(this).closest(".tb-list__item");r.siblings().removeClass("tb-list__item_current"),r.addClass("tb-list__item_current"),r.parent().hasClass("tb-list__tk_templates")?t.replacePreview():t.renderPreview()}),e(document).on("click",".tb-preview__prev",function(n){n.preventDefault();var r=e(".tb-list__item_current"),a=e(".tb-list__item");if(!r.prev().length)return!1;var i=r.prev();a.removeClass("tb-list__item_current"),i.addClass("tb-list__item_current"),e(".tb-preview__sidebar-content").children(".tb-list__tk_templates").length>0?t.replacePreview():t.renderPreview()}),e(document).on("click",".tb-preview__next",function(n){n.preventDefault();var r=e(".tb-list__item_current"),a=e(".tb-list__item");if(!r.next().length)return!1;var i=r.next();a.removeClass("tb-list__item_current"),i.addClass("tb-list__item_current"),e(".tb-preview__sidebar-content").children(".tb-list__tk_templates").length>0?t.replacePreview():t.renderPreview()}),t.hideControls(),t.devicePreview(),t.hidePreview()}}]),t}();e(document).ready(function(){(new t).run()})}(jQuery)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=function(){function e(e,t){var n=[],_n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(_n=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,a=e}finally{try{!_n&&o.return&&o.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=wp.i18n,__=a.__,i=a.sprintf,o=wp.components,l=o.Button,s=o.Popover,c=o.Tooltip,u=o.Dashicon,p=o.Notice,m=wp.element.useState,d=function(e){var t=e.gutentorInfo,n=m(!1),a=r(n,2),o=a[0],d=a[1],b=function(){d(function(e){return!e})};return wp.element.createElement(c,{text:__("Info","templateberg")},wp.element.createElement(l,{className:"tb-advanced-import-modal-tabs-button","aria-label":__("Info","templateberg"),onClick:b},wp.element.createElement(u,{icon:"info-outline"}),o&&wp.element.createElement(s,null,wp.element.createElement(p,{status:"info",isDismissible:!1},i(__("You have %d Template Kits remaining from Gutentor Pro.","templateberg"),t.template_kits_left)))))}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__=wp.i18n.__,c=wp.element,u=c.Component,p=c.Fragment,m=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.paged,n=e.max_num_pages,r=e.setPage,a=void 0===r?function(){}:r,i=[],o=t>=3?[t-1,t,t+1]:[1,2,3];n>1&&(o.includes(1)||i.push(wp.element.createElement("li",{className:"tb-pagination-item"},wp.element.createElement("a",{className:"tb-pagination-link",href:"#","data-gpage":"1",onClick:function(){a(1)}}," ",__("1","templateberg")))),t>3&&i.push(wp.element.createElement("li",{className:"tb-pagination-item tb-pagination-dots"},wp.element.createElement("a",{className:"tb-pagination-link",href:"#"},"..."))),o.map(function(e){if(n>=e){var r=t===e?" tb-pagination-active":"";i.push(wp.element.createElement("li",{className:"tb-pagination-item "+r},wp.element.createElement("a",{className:"tb-pagination-link",href:"#","data-gpage":e,onClick:function(){a(e)}},__(e,"templateberg"))))}}),n>t+1&&(n>3&&i.push(wp.element.createElement("li",{className:"tb-pagination-item tb-pagination-dots"},wp.element.createElement("a",{className:"tb-pagination-link",href:"#"},"..."))),n>3&&i.push(wp.element.createElement("li",{className:"tb-pagination-item"},wp.element.createElement("a",{className:"tb-pagination-link",href:"#","data-gpage":n,onClick:function(){a(n)}},__(n,"templateberg"))))));var s=t===n?"tb-pagination-disabled ":"",c=t<2?"tb-pagination-disabled ":"",u=t-1<1?1:t-1,m=t+1>n?n:t+1;return wp.element.createElement(p,null,wp.element.createElement("ul",{className:"tb-pagination"},wp.element.createElement("li",{className:l()("tb-pagination-item tb-pagination-prev",c)},wp.element.createElement("a",{className:"tb-pagination-link",href:"#",onClick:function(){a(u)}},"<<")),i,wp.element.createElement("li",{className:l()("tb-pagination-item tb-pagination-next",s)},wp.element.createElement("a",{className:"tb-pagination-link",href:"#","data-gpage":t+1,onClick:function(){a(m)}},">>"))))}}]),t}(u);t.a=m},function(e,t,n){"use strict";var r=n(36);window.templatebergSettings={};var a=wp.plugins,i=a.registerPlugin,o=a.unregisterPlugin;i("templateberg",{render:function(){return wp.element.createElement(r.a,null)}}),templateberg.gutentor.active&&o("templateberg")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(11),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),__=wp.i18n.__,s=wp.element,c=s.Component,u=s.Fragment,p=wp.components.Button,m=wp.element.createElement("svg",{version:"1.1",id:"black-logo",x:"0px",y:"0px",viewBox:"0 0 44 47",style:{enableBackground:"new 0 0 44 47"}},wp.element.createElement("path",{class:"cls-1",d:"M36.6,4.31A62.21,62.21,0,0,0,26,3.05C25.11,3,24.24,3,23.34,3H22A64,64,0,0,0,11.4,4a45.7,45.7,0,0,0-5.31,1.3v12.4H11.4V9.62a61.72,61.72,0,0,1,9.28-1.19V32L24,33.16,27.32,32V8.37a63,63,0,0,1,9.28,1v8.4h5.31v-12A42.36,42.36,0,0,0,36.6,4.31Z",transform:"translate(-6.09 -3)"}),wp.element.createElement("polygon",{class:"cls-1",points:"30.5 23.53 30.5 27.49 19.89 34.76 17.91 36.13 15.92 34.76 5.3 27.49 5.3 23.53 0 23.53 0 30.48 5.3 34.13 15.92 41.39 17.91 42.76 19.89 41.39 30.5 34.13 35.81 30.48 35.81 23.53 30.5 23.53"})),d=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){if(!wp.editPost)return"";var e=wp.editPost,t=e.PluginSidebar,n=e.PluginSidebarMoreMenuItem;return wp.element.createElement(u,null,wp.element.createElement(t,{icon:m,name:"templateberg",title:__("Templateberg Settings")},wp.element.createElement("div",{className:"tb-export-button"},wp.element.createElement(p,{isPrimary:!0,isLarge:!0,id:"tb-advanced-export-button",title:__("Export the whole editor template on JSON format","templateberg"),onClick:function(){Object(o.a)()}},wp.element.createElement("img",{src:templateberg.templatebergWhiteSvg,className:"components-panel__icon",size:"20",style:{width:"20px",marginRight:"10px"}}),__("Export Template","templateberg")))),wp.element.createElement(n,{icon:m,target:"templateberg"},__("Templateberg Settings")))}}]),t}(c);t.a=d}]);